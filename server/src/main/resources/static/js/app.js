(function(e){function t(t){for(var n,s,u=t[0],i=t[1],c=t[2],d=0,p=[];d<u.length;d++)s=u[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var i=r[u];0!==o[i]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=i;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);var n,o=r("5530"),a=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),s=r("5f5b"),u=r("2f62"),i=r("8c4f"),c=r("1da1"),l=r("ade3"),d=(r("96cf"),r("ac1f"),r("5319"),r("841c"),r("d3b7"),r("bc3a")),p=r.n(d),f=window.contextUrl?window.contextUrl:"/",m="".concat(f,"api"),g=p.a.create({baseURL:m,withCredentials:!0,headers:{"Content-Type":"application/json"}}),b=p.a.create({baseURL:f,withCredentials:!1,headers:{"Content-Type":"application/json"}});g.interceptors.response.use(null,(function(e){return e.response&&401===e.response.status&&(delete localStorage.loggedIn,window.location.replace("/login?redirect=".concat(encodeURIComponent(window.location.pathname+window.location.search)))),Promise.reject(e)}));var h="M_LOGGED_IN",v="A_LOGIN",w="A_SIGNUP",x="A_LOGOUT",y={state:{loggedIn:"true"===localStorage.loggedIn},mutations:Object(l["a"])({},h,(function(e,t){e.loggedIn=t,localStorage.loggedIn=t})),actions:(n={},Object(l["a"])(n,v,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,b.post("/login",t);case 3:return o=r.sent,n(h,!0),r.abrupt("return",o);case 6:case"end":return r.stop()}}),r)})))()})),Object(l["a"])(n,w,(function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("TODO: ".concat(t));case 1:case"end":return e.stop()}}),e)})))()})),Object(l["a"])(n,x,(function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,b.get("/logout");case 3:r(h,!1);case 4:case"end":return t.stop()}}),t)})))()})),n),getters:{}};a["default"].use(u["a"]);var O=new u["a"].Store({modules:{user:y}}),_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("h1",[e._v(e._s(e.msg))]),r("b-button",{attrs:{variant:"primary"},on:{click:e.test}},[e._v("Test")]),r("br"),r("b-button",{attrs:{variant:"secondary"},on:{click:e.logout}},[e._v("Logout")])],1)},j=[],k={data:function(){return{msg:"Welcome to vue!"}},methods:{test:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/user/current");case 2:r=t.sent,e.msg="Hello ".concat(r.data.username,"!");case 4:case"end":return t.stop()}}),t)})))()},logout:function(){var e=this;this.$store.dispatch(x).then((function(){e.$router.push({path:"/login",query:{logout:!0}})}))}}},I=k,$=r("2877"),P=Object($["a"])(I,_,j,!1,null,null,null),R=P.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-col",{staticClass:"bg-light my-4 py-3 border border-primary rounded",attrs:{cols:"12",lg:"4","offset-lg":"4"}},[r("h1",{staticClass:"pb-3 border-bottom"},[e._v("Login")]),r("b-alert",{attrs:{show:e.loggedOut,variant:"success",dismissible:""}},[e._v(" You have been logged out. ")]),r("b-alert",{attrs:{show:e.expired,variant:"danger",dismissible:""}},[e._v(" Your session has expired. Please login again. ")]),r("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Incorrect username or password. ")]),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("b-form-group",{attrs:{label:"Username:","label-for":"username"}},[r("b-form-input",{attrs:{id:"username",name:"username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[r("b-form-input",{attrs:{type:"password",id:"password",name:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("div",{staticClass:"text-center"},[r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1)],1)],1)],1)},L=[],S={data:function(){return{username:null,password:null,error:!1}},methods:{login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("loading",!0),t.prev=1,t.next=4,e.$store.dispatch(v,{username:e.username,password:e.password});case 4:r=e.$route.query.redirect,e.$router.push(null!==r&&void 0!==r?r:"/"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=!0;case 11:return t.prev=11,e.$emit("loading",!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})))()}},computed:{loggedOut:function(){return!!this.$route.query.logout},expired:function(){return!!this.$route.query.expired}}},T=S,U=Object($["a"])(T,C,L,!1,null,null,null),q=U.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-col",{staticClass:"text-center"},[r("h1",[e._v("404 Page Not Found")])])],1)},A=[],G={},M=Object($["a"])(G,E,A,!1,null,null,null),N=M.exports;a["default"].use(i["a"]);var D=[{path:"/",name:"index",component:R,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:q,beforeEnter:function(e,t,r){O.state.user.loggedIn?r("/"):r()}},{path:"*",name:"not-found",component:N}],J=new i["a"]({mode:"history",base:"/",routes:D});J.beforeEach((function(e,t,r){e.matched.some((function(e){return e.meta.requiresAuth}))?O.state.user.loggedIn?r():r({name:"login",query:{redirect:e.fullPath}}):r()}));var Y=J,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view",{on:{loading:e.setLoading}})},H=[],W={data:function(){return{loading:!1}},methods:{setLoading:function(e){this.loading=e}}},z=W,B=Object($["a"])(z,F,H,!1,null,null,null),K=B.exports;r("2dd8");a["default"].use(s["a"]),a["default"].config.productionTip=!1,a["default"].mixin({computed:Object(o["a"])({},Object(u["b"])({loggedIn:function(e){return e.user.loggedIn}}))}),new a["default"]({router:Y,store:O,render:function(e){return e(K)}}).$mount("#app")}});